"use strict";(self.webpackChunkreact_typescript_redux_mui_responsive=self.webpackChunkreact_typescript_redux_mui_responsive||[]).push([[443],{9443:function(e,t,n){n.r(t);var r=n(1413),o=n(9439),a=n(2791),i=n(9434),u=n(7689),c=n(1087),s=n(8870),l=n(6151),d=n(7621),p=n(9504),f=n(890),v=n(4721),h=n(4852),x=n(792),Z=n(8029),m=n(5574),g=n(7123),y=n(9157),b=n(1691),_=n(5661),j=n(5931),C=n(6872),w=n(7511),E=n(184);t.default=function(){var e=(0,u.UO)().group_id,t=(0,u.s0)(),n=(0,i.I0)(),x=(0,i.v9)((function(e){return e.blog.current_group})),Z=(0,i.v9)((function(e){return e.auth.user})),R=(0,a.useState)([]),U=(0,o.Z)(R,2),G=U[0],K=U[1],S=(0,a.useState)([]),P=(0,o.Z)(S,2),A=P[0],N=P[1],z=(0,a.useState)([]),O=(0,o.Z)(z,2),W=O[0],D=O[1],I=(0,a.useState)(null),J=(0,o.Z)(I,2),Y=J[0],L=J[1],X=(0,a.useState)(!1),q=(0,o.Z)(X,2),F=q[0],V=q[1],B=(0,a.useState)(!1),M=(0,o.Z)(B,2),H=M[0],Q=M[1],$=(0,a.useState)(!1),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],re=(0,a.useState)(""),oe=(0,o.Z)(re,2),ae=oe[0],ie=oe[1],ue=(0,a.useState)(""),ce=(0,o.Z)(ue,2),se=ce[0],le=ce[1];(0,a.useEffect)((function(){n((0,C.rJ)(e))}),[]),(0,a.useEffect)((function(){n((0,C.D4)("top"))}),[]),(0,a.useEffect)((function(){if(x&&(K([]),N([]),L(null),D([])),x&&Z){L(x);var t=Z?JSON.parse(Z.allowed_categories):null,n=x.categories;if(D(n),1==Z.role_id||2==Z.role_id&&(x.id==Z.group_id||"1"==x.id)){K(n);var r=[];null===n||void 0===n||n.forEach((function(e){r.push(e.id)})),N(r)}else{var o=t["".concat(e)];if(o){var a=[],i=[];null===n||void 0===n||n.forEach((function(e){o.includes("".concat(null===e||void 0===e?void 0:e.id))&&(a.push(e),i.push(e.id))})),K(a),N(i)}}}console.log(x)}),[x]);var de=function(e){var t=!0;return A.includes(e.id)||(t=!1),"0"==(null===e||void 0===e?void 0:e.blog_count)&&(t=!1),("1"==(null===Z||void 0===Z?void 0:Z.role_id)||"2"==(null===Z||void 0===Z?void 0:Z.role_id)&&(null===Y||void 0===Y?void 0:Y.id)==(null===Z||void 0===Z?void 0:Z.group_id))&&(t=!0),t},pe=function(){ne(!1)},fe=a.forwardRef((function(e,t){return(0,E.jsx)(j.Z,(0,r.Z)({direction:"up",ref:t},e))}));return(0,E.jsxs)(s.Z,{sx:{mt:4,mb:4,width:{xs:"100%",ms:"80%",md:"80%",lg:"70%"}},children:[(0,E.jsx)(k,{open:F,handleClose:function(){V(!1)},handleCreate:function(e){var r={group_id:Y.id,name:e};V(!1),n((0,C.PA)(t,r))}}),(0,E.jsx)(T,{open:H,handleClose:function(){Q(!1)},handleUpdate:function(e){var r={group_id:Y.id,name:e};Q(!1),n((0,C.ET)(t,r,ae))},data:se}),te&&(0,E.jsxs)(m.Z,{open:te,TransitionComponent:fe,keepMounted:!0,onClose:pe,"aria-describedby":"alert-dialog-slide-description",children:[(0,E.jsx)(_.Z,{children:"\u6307\u5b9a\u3057\u305f\u30b9\u30c6\u30c3\u30d7\u3092\u524a\u9664\u3067\u304d\u307e\u3059"}),(0,E.jsx)(y.Z,{children:(0,E.jsx)(b.Z,{id:"alert-dialog-slide-description",children:se+"\u3092\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\uff1f \u3053\u306e\u30b9\u30c6\u30c3\u30d7\u306b\u5c5e\u3059\u308b\u3059\u3079\u3066\u306e\u30b8\u30e3\u30f3\u30eb\u3068\u30d6\u30ed\u30b0\u304c\u3059\u3079\u3066\u6d88\u53bb\u3055\u308c\u307e\u3059\u3002"})}),(0,E.jsxs)(g.Z,{children:[(0,E.jsx)(l.Z,{onClick:pe,color:"success",children:"\u540c\u610f\u3057\u306a\u3044"}),(0,E.jsx)(l.Z,{onClick:function(){ne(!1),n((0,C.Xw)(ae))},color:"error",children:"\u540c\u610f\u3059\u308b"})]})]}),(0,E.jsx)(d.Z,{children:(0,E.jsxs)(p.Z,{children:[(0,E.jsxs)(f.Z,{sx:{textAlign:"center",fontWeight:"bold",my:"1rem"},variant:"h4",children:["\u3088\u3046\u3053\u305d","   ",(0,E.jsxs)(s.Z,{style:{color:w.t.main,display:"inline-block"},children:[null===Z||void 0===Z?void 0:Z.name," \u3055\u3093"]}),"ID: ",null===Z||void 0===Z?void 0:Z.user_id]}),(0,E.jsx)(v.Z,{orientation:"horizontal"}),(0,E.jsxs)(s.Z,{sx:{mt:4},children:[(0,E.jsx)(f.Z,{sx:{color:w.t.main,paddingTop:"20px",mb:2,textAlign:"left",fontSize:"1.5rem",fontWeight:"600"},variant:"h5",children:"\u3042\u306a\u305f\u304c"+(null===Y||void 0===Y?void 0:Y.name)+"\u30b0\u30eb\u30fc\u30d7\u5185\u3067\u3001 \u95b2\u89a7\u3067\u304d\u308b\u30ab\u30c6\u30b4 \u30ea\u306f"}),(0,E.jsx)(s.Z,{children:null===G||void 0===G?void 0:G.map((function(e){return(0,E.jsxs)(f.Z,{sx:{ml:2,fontSize:"1.2rem",display:"inline-block"},children:[" ","\u2022  "+(null===e||void 0===e?void 0:e.name)]})}))})]}),(0,E.jsxs)(s.Z,{sx:{mt:4,width:"100%"},children:[(0,E.jsxs)(s.Z,{sx:{display:"inline-flex",justifyContent:"space-between",width:"100%"},children:[(0,E.jsx)(f.Z,{sx:{color:w.t.main,mb:2,textAlign:"left",fontSize:"1.5rem",fontWeight:"600"},variant:"h5",children:"\u30ab\u30c6\u30b4\u30ea\u5206\u5272"}),(1==(null===Z||void 0===Z?void 0:Z.role_id)||2==(null===Z||void 0===Z?void 0:Z.role_id)&&(null===Z||void 0===Z?void 0:Z.group_id)==(null===Y||void 0===Y?void 0:Y.id))&&(0,E.jsx)(l.Z,{variant:"outlined",color:"primary",onClick:function(){V(!0)},sx:{float:"right",fontSize:"1.2rem",fontWeight:"500",mb:2},children:"\u4f5c\u6210\u3059\u308b"})]}),(0,E.jsx)(d.Z,{children:(0,E.jsx)(p.Z,{sx:{},children:null===W||void 0===W?void 0:W.map((function(e){return(0,E.jsxs)(h.ZP,{button:!0,sx:{border:"1px #f1f3f4 solid",backgroundColor:"#ffffff",display:"flex",justifyContent:"space-between"},children:[de(e)?(0,E.jsx)(c.rU,{to:"/genre/genres/".concat(null===e||void 0===e?void 0:e.id),style:{textDecoration:"none",color:"initial",width:"100%"},children:(0,E.jsxs)(f.Z,{sx:{textAlign:"left",fontSize:"1.2rem"},children:[null===e||void 0===e?void 0:e.name," ",(0,E.jsx)(s.Z,{sx:{display:"inline",pl:1},children:"( "+(null===e||void 0===e?void 0:e.blog_count)+" )"})]})}):(0,E.jsx)(s.Z,{children:(0,E.jsxs)(f.Z,{sx:{textAlign:"left",fontSize:"1.2rem",color:"grey"},children:[null===e||void 0===e?void 0:e.name," ",(0,E.jsx)(s.Z,{sx:{display:"inline",pl:1},children:"( "+(null===e||void 0===e?void 0:e.blog_count)+" )"})]})}),(1==(null===Z||void 0===Z?void 0:Z.role_id)||2==(null===Z||void 0===Z?void 0:Z.role_id)&&(null===Z||void 0===Z?void 0:Z.group_id)==(null===Y||void 0===Y?void 0:Y.id))&&(0,E.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"right",zIndex:1e3},children:[(0,E.jsx)(l.Z,{variant:"outlined",color:"success",size:"small",onClick:function(){return t=null===e||void 0===e?void 0:e.id,n=null===e||void 0===e?void 0:e.name,le(n),ie(t),void Q(!0);var t,n},sx:{float:"right",mr:2},children:"\u7de8\u96c6"}),(0,E.jsx)(l.Z,{variant:"outlined",color:"error",size:"small",onClick:function(){return t=null===e||void 0===e?void 0:e.id,n=null===e||void 0===e?void 0:e.name,le(n),ie(t),void ne(!0);var t,n},sx:{float:"right"},children:"\u524a\u9664"})]})]})}))})})]})]})})]})};var k=function(e){var t=e.open,n=e.handleClose,r=e.handleCreate,i=(0,a.useState)(""),u=(0,o.Z)(i,2),c=u[0],d=u[1];(0,a.useEffect)((function(){d("")}),[t]);return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(x.Z,{open:t,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:{borderRadius:"15px"},children:(0,E.jsx)("form",{onSubmit:function(e){e.preventDefault(),r(c)},children:(0,E.jsxs)(s.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[(0,E.jsx)(f.Z,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{mb:2},children:"\u30b9\u30c6\u30c3\u30d7\u540d"}),(0,E.jsx)(Z.Z,{type:"text",color:"primary",onChange:function(e){return d(e.target.value)},value:c,required:!0,fullWidth:!0}),(0,E.jsx)(l.Z,{variant:"outlined",color:"primary",type:"submit",size:"large",sx:{textAlign:"right",mt:4,float:"right",height:50},children:"\u4f5c\u6210\u3059\u308b"})]})})})})},T=function(e){var t=e.open,n=e.handleClose,r=e.handleUpdate,i=e.data,u=(0,a.useState)(""),c=(0,o.Z)(u,2),d=c[0],p=c[1];(0,a.useEffect)((function(){p(i)}),[t]);return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(x.Z,{open:t,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:{borderRadius:"15px"},children:(0,E.jsx)("form",{onSubmit:function(e){e.preventDefault(),r(d)},children:(0,E.jsxs)(s.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[(0,E.jsx)(f.Z,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{mb:2},children:"\u30b9\u30c6\u30c3\u30d7\u540d\u3092\u5909\u66f4\u3057\u307e\u3059\u3002"}),(0,E.jsx)(Z.Z,{type:"text",color:"primary",onChange:function(e){return p(e.target.value)},value:d,required:!0,fullWidth:!0}),(0,E.jsx)(l.Z,{variant:"outlined",color:"primary",type:"submit",size:"large",sx:{textAlign:"right",mt:4,float:"right",height:50},children:"\u4fdd\u5b58"})]})})})})}},6872:function(e,t,n){n.d(t,{D4:function(){return c},ET:function(){return v},PA:function(){return f},R4:function(){return y},UK:function(){return p},Ul:function(){return d},VN:function(){return _},VX:function(){return x},Wf:function(){return b},Xw:function(){return h},di:function(){return Z},j4:function(){return m},pJ:function(){return g},rJ:function(){return l},tG:function(){return s}});var r=n(4165),o=n(5861),a=n(7080),i=n(7955),u=n(6430),c=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:i.U.SET_CURRENT_PAGE,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},s=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.ZP.get("/auth/category/allcategories");case 3:n=e.sent,t({type:i.U.GET_ALL_CATEGORIES,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,u.K)(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},l=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.ZP.get("/auth/category/currentgroup/".concat(e));case 3:o=t.sent,n({type:i.U.GET_CURRENT_GROUP,payload:o.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(0,u.K)(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.ZP.get("/auth/genre/currentcategory/".concat(e));case 3:o=t.sent,n({type:i.U.GET_CURRENT_CATEGORY,payload:o.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(0,u.K)(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.ZP.get("/auth/blog/currentgenre/".concat(e));case 3:o=t.sent,n({type:i.U.GET_CURRENT_GENRE,payload:o.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(0,u.K)(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e,t){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var o,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={headers:{"Content-Type":"multipart/form-data"}},e.next=4,a.ZP.post("/auth/category/create",t,o);case 4:c=e.sent,n({type:i.U.GET_CURRENT_GROUP,payload:c.data.current_group}),(0,u.K)(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,u.K)(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},v=function(e,t,n){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(o){var c,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={headers:{"Content-Type":"multipart/form-data"}},e.next=4,a.ZP.post("/auth/category/update/".concat(n),t,c);case 4:s=e.sent,o({type:i.U.GET_CURRENT_GROUP,payload:s.data.current_group}),(0,u.K)(s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,u.K)(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},h=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var o,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o={headers:{"Content-Type":"multipart/form-data"}},t.next=4,a.ZP.post("/auth/category/delete/".concat(e),o);case 4:c=t.sent,n({type:i.U.GET_CURRENT_GROUP,payload:c.data.current_group}),(0,u.K)(c),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,u.K)(t.t0.response);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e,t){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var o,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={headers:{"Content-Type":"multipart/form-data"}},e.next=4,a.ZP.post("/auth/genre/create",t,o);case 4:c=e.sent,n({type:i.U.GET_CURRENT_CATEGORY,payload:c.data.current_category}),(0,u.K)(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,u.K)(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},Z=function(e,t,n){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(o){var c,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={headers:{"Content-Type":"multipart/form-data"}},e.next=4,a.ZP.post("/auth/genre/update/".concat(n),t,c);case 4:s=e.sent,o({type:i.U.GET_CURRENT_CATEGORY,payload:s.data.current_category}),(0,u.K)(s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,u.K)(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var o,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o={headers:{"Content-Type":"multipart/form-data"}},t.next=4,a.ZP.post("/auth/genre/delete/".concat(e),o);case 4:c=t.sent,n({type:i.U.GET_CURRENT_CATEGORY,payload:c.data.current_category}),(0,u.K)(c),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,u.K)(t.t0.response);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var o,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={headers:{"Content-Type":"multipart/form-data"}},e.next=4,a.ZP.get("/auth/blog/show/".concat(t),o);case 4:c=e.sent,n({type:i.U.GET_CURRENT_BLOG,payload:c.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,u.K)(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},y=function(e,t){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(o){var i,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i={headers:{"Content-Type":"multipart/form-data"}},n.next=4,a.ZP.post("/auth/blog/create",t,i);case 4:(c=n.sent).status<300&&e("/blog/blogs/".concat(null===t||void 0===t?void 0:t.genre_id)),(0,u.K)(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,u.K)(n.t0.response);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},b=function(e,t,n){return function(){var i=(0,o.Z)((0,r.Z)().mark((function o(i){var c,s;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c={headers:{"Content-Type":"multipart/form-data"}},r.next=4,a.ZP.post("/auth/blog/update/".concat(n),t,c);case 4:(s=r.sent).status<300&&e("/blog/show/".concat(n)),(0,u.K)(s),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),(0,u.K)(r.t0.response);case 12:case"end":return r.stop()}}),o,null,[[0,9]])})));return function(e){return i.apply(this,arguments)}}()},_=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var o,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o={headers:{"Content-Type":"multipart/form-data"}},t.next=4,a.ZP.post("/auth/blog/delete/".concat(e),o);case 4:c=t.sent,n({type:i.U.GET_CURRENT_GENRE,payload:c.data.current_genre}),(0,u.K)(c),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,u.K)(t.t0.response);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=443.6db10f98.chunk.js.map